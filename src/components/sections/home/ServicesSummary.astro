---
import servicesData from '../../../data/services.json';
import type { ServicesData, Service } from '../../../types';
import SectionTitle from '../../common/SectionTitle.astro';

const data = servicesData as ServicesData;

// Manually select and order services to match the visual hierarchy request
const selectedIds = ['comercial', 'bancario', 'fiscal', 'notarial', 'patrimonio', 'bienes-raices'];

// Flatten the data structure to search across all services
const allServices: Service[] = [...(data.oferta || []), ...(data.especializados || [])];
const displayedServices = selectedIds.map(id => allServices.find(s => s.id === id)).filter((s): s is Service => Boolean(s));

// Fallback if IDs match fails
const finalServices = displayedServices.length >= 6 ? displayedServices : allServices.slice(0, 6);
---

<section class="py-16 md:py-24 bg-primary text-white relative">
  
  <div class="container mx-auto px-6 md:px-30">
    
    <SectionTitle 
      title="Soluciones Legales Integrales" 
      subtitle="NUESTROS SERVICIOS" 
      theme="dark"
    />

    <!-- Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12 md:mb-16">
      {finalServices.map((service, index) => (
        <a 
          href={`/servicios#${service.id}`}
          class="group block h-auto md:h-full md:min-h-95 p-6 md:p-12 border border-accent hover:bg-white/5 transition-colors duration-500 bg-transparent fade-in-section flex flex-col md:justify-between"
          style={`transition-delay: ${index * 100}ms`}
        >
          <div>
            <!-- Title -->
            <h3 class="font-heading text-xl md:text-2xl lg:text-3xl text-white mb-4 md:mb-6 leading-tight group-hover:text-accent transition-colors duration-300">
              {service.title}
            </h3>

            <!-- Description -->
            <p class="text-secondary font-light leading-relaxed mb-6 md:mb-8 text-sm md:text-base">
              {service.shortDescription}
            </p>
          </div>

          <!-- Link Arrow -->
          <div class="flex items-center text-accent text-xs md:text-sm tracking-widest uppercase font-heading mt-2 md:mt-auto opacity-80 group-hover:opacity-100 group-hover:translate-x-2 transition-all duration-300">
            Conocer más <span class="ml-2">→</span>
          </div>
        </a>
      ))}
    </div>

    <!-- Bottom CTA -->
    <div class="text-center fade-in-section">
      <a 
        href="/servicios" 
        class="inline-block px-8 py-3 md:px-10 md:py-4 border border-accent/50 text-accent font-heading text-xs md:text-sm uppercase tracking-[0.15em] hover:bg-accent hover:text-primary transition-all duration-300 hover:border-accent"
      >
        Ver Todos Los Servicios
      </a>
    </div>

  </div>
</section>