---
import teamData from '../../../data/team.json';
import type { TeamMember } from '../../../types';
import SectionTitle from '../../common/SectionTitle.astro';

const members = teamData as TeamMember[];

// Helper to optimize images
const getOptimizedImage = (url: string) => {
  if (url.includes('pexels.com')) {
    return `${url}?auto=compress&cs=tinysrgb&w=800`;
  }
  return url;
};
---

<section class="py-16 md:py-24 bg-white">
  <div class="container mx-auto px-6 md:px-25">
    
    <!-- Decorative Line -->
    <div class="flex justify-center mb-6 md:mb-8 fade-in-section">
      <div class="w-16 md:w-24 h-0.5 bg-accent"></div>
    </div>
    
    <SectionTitle 
      title="Conozca a Nuestro Equipo"
      theme="light"
    >
       <p class="text-gray-500 font-body font-light text-base md:text-lg max-w-2xl mx-auto leading-relaxed">
        Cada miembro de nuestro equipo aporta experiencia especializada y un compromiso inquebrantable con la excelencia legal y la satisfacci√≥n del cliente.
      </p>
    </SectionTitle>

    <!-- Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-8 max-w-6xl mx-auto">
      {members.map((member, index) => (
        <a 
          href={`/equipo/${member.id}`}
          class="group flex flex-col fade-in-section cursor-pointer" 
          style={`transition-delay: ${index * 100}ms`}
        >
          <!-- Image Container -->
          <div class="aspect-[3/4] w-full overflow-hidden bg-gray-100 mb-6 relative">
             <div class="absolute inset-0 bg-primary/0 group-hover:bg-primary/5 transition-colors duration-500 z-10"></div>
             <img 
              src={getOptimizedImage(member.image)} 
              alt={member.name} 
              width="600"
              height="800"
              loading="lazy"
              transition:name={`image-${member.id}`}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
             />
          </div>

          <!-- Content -->
          <div class="text-center px-4">
            <h3 class="font-heading text-lg md:text-xl text-primary mb-2 group-hover:text-accent transition-colors">
              {member.name}
            </h3>
            
            <p class="text-accent font-heading text-sm mb-1">
              {member.role}
            </p>

            <p class="text-gray-500 font-body text-xs md:text-sm">
              {member.specialty}
            </p>
             
            <span class="inline-block mt-4 text-xs font-bold text-primary border-b border-primary/20 pb-0.5 group-hover:border-accent group-hover:text-accent transition-colors">
              VER PERFIL COMPLETO
            </span>
          </div>
        </a>
      ))}
    </div>

  </div>
</section>